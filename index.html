<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-client-id" content="761223278824-ijp6lq944kp1lapmcgubvh8pq65r67t3.apps.googleusercontent.com">
    <title>ClauseCode AI - Document Analyzer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Desktop/iPad Navbar -->
    <nav class="desktop-navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <button onclick="window.history.back()" class="navbar-back-btn" title="Go back">
                    <span>‚Üê</span>
                </button>
                <span class="navbar-logo">üîç</span>
                <span class="navbar-title">ClauseCode AI</span>
            </div>
            <div class="navbar-links">
                <div class="navbar-dropdown">
                    <button class="navbar-link dropdown-toggle">
                        <span class="navbar-icon">‚ÑπÔ∏è</span>
                        <span>Info</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="/presentation.html" class="dropdown-item" target="_blank">
                            <span class="navbar-icon">üé¨</span>
                            <span>Presentation</span>
                        </a>
                        <a href="/pitch-deck.html" class="dropdown-item" target="_blank">
                            <span class="navbar-icon">üìä</span>
                            <span>Pitch Deck</span>
                        </a>
                        <a href="/gwc.pdf" class="dropdown-item" target="_blank">
                            <span class="navbar-icon">üìÑ</span>
                            <span>GWC PDF</span>
                        </a>
                    </div>
                </div>
                <div class="navbar-dropdown">
                    <button class="navbar-link dropdown-toggle">
                        <span class="navbar-icon">üìö</span>
                        <span>Research</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="/accessibility-stats.html" class="dropdown-item">
                            <span class="navbar-icon">üìä</span>
                            <span>Statistics</span>
                        </a>
                        <a href="/case-studies.html" class="dropdown-item">
                            <span class="navbar-icon">üìñ</span>
                            <span>Case Studies</span>
                        </a>
                    </div>
                </div>
                <a href="/terms.html" class="navbar-link">
                    <span class="navbar-icon">üìú</span>
                    <span>Terms & Conditions</span>
                </a>
            </div>
            <div class="navbar-auth">
                <div id="userInfo" class="user-info" style="display: none;">
                    <span id="userName" class="user-name"></span>
                    <button id="logoutBtn" class="btn-logout">Logout</button>
                </div>
                <button id="loginBtn" class="btn-login">
                    <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" style="width: 18px; height: 18px; margin-right: 8px;">
                    Sign in with Google
                </button>
            </div>
        </div>
    </nav>

    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>üîç ClauseCode AI</h1>
                    <p class="subtitle">Analyze Terms & Conditions with AI-Powered Agents</p>
                </div>
                <div class="header-right">
                    <div id="userInfoMobileHeader" class="user-info" style="display: none;">
                        <span id="userNameMobileHeader" class="user-name"></span>
                        <button id="logoutBtnMobileHeader" class="btn-logout">Logout</button>
                    </div>
                    <button id="loginBtnMobileHeader" class="btn-login">
                        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" style="width: 18px; height: 18px; margin-right: 8px;">
                        Sign in with Google
                    </button>
                </div>
            </div>
            <button class="hamburger-menu" id="hamburgerMenu" aria-label="Toggle menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <button class="hamburger-avatar" id="hamburgerAvatar" style="display: none;" aria-label="Toggle menu">
                <img id="hamburgerAvatarPhoto" alt="User" class="hamburger-avatar-img">
            </button>
            <div class="header-links" id="headerLinks">
                <div class="mobile-auth">
                    <div id="mobileUserInfo" class="mobile-user-info" style="display: none;">
                        <img id="mobileUserPhoto" class="mobile-user-photo" alt="User">
                        <span id="mobileUserName" class="mobile-user-name"></span>
                        <button id="mobileLogoutBtn" class="mobile-btn-logout">Logout</button>
                    </div>
                    <button id="mobileLoginBtn" class="mobile-btn-login">
                        <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" style="width: 18px; height: 18px; margin-right: 8px;">
                        Sign in with Google
                    </button>
                </div>
                <div class="nav-divider"></div>
                <div class="mobile-dropdown">
                    <button class="header-link dropdown-toggle-mobile">‚ÑπÔ∏è Info <span class="dropdown-arrow-mobile">‚ñº</span></button>
                    <div class="mobile-dropdown-menu">
                        <a href="/presentation.html" class="header-link-sub" target="_blank">üé¨ Presentation</a>
                        <a href="/pitch-deck.html" class="header-link-sub" target="_blank">üìä Pitch Deck</a>
                        <a href="/PITCH_NARRATION.md" class="header-link-sub" target="_blank">üé§ Pitch Narration</a>
                        <a href="/gwc.pdf" class="header-link-sub" target="_blank">üìÑ GWC PDF</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="header-link dropdown-toggle-mobile">üìö Research <span class="dropdown-arrow-mobile">‚ñº</span></button>
                    <div class="mobile-dropdown-menu">
                        <a href="/accessibility-stats.html" class="header-link-sub">üìä Statistics</a>
                        <a href="/case-studies.html" class="header-link-sub">üìñ Case Studies</a>
                    </div>
                </div>
                <a href="/terms.html" class="header-link">üìú Terms & Conditions</a>
            </div>
        </header>

        <main>
            <!-- Progress Indicator -->
            <div class="progress-indicator">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Upload</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Choose Agent</div>
                </div>
                <div class="progress-line"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Results</div>
                </div>
            </div>

            <!-- Card 1: Document Upload -->
            <div class="wizard-section active" id="card-1">
                <!-- Method Selection as Separate Cards -->
                <div class="method-selection-four">
                    <div class="method-card" data-method="file">
                        <span class="method-icon">üìÅ</span>
                        <h4>Upload File</h4>
                        <p>PDF or Word document</p>
                    </div>
                    <div class="method-card" data-method="url">
                        <span class="method-icon">üåê</span>
                        <h4>Fetch from URL</h4>
                        <p>Scrape web content</p>
                    </div>
                    <div class="method-card" data-method="text">
                        <span class="method-icon">üìù</span>
                        <h4>Paste Text</h4>
                        <p>Copy and paste directly</p>
                    </div>
                    <a href="/saved-analyses.html" class="method-card method-card-link">
                        <span class="method-icon">üíæ</span>
                        <h4>My Analyses</h4>
                        <p>View saved analyses</p>
                    </a>
                </div>

                <!-- File Upload Input -->
                <div class="input-container-standalone" id="fileInputContainer" style="display: none;">
                    <label for="fileUpload" class="file-upload-area">
                        <span class="upload-icon">üìÅ</span>
                        <span class="upload-text">Click or drag to upload</span>
                        <span class="upload-hint">Supports PDF and Word documents</span>
                        <input type="file" id="fileUpload" accept=".pdf,.doc,.docx" hidden>
                    </label>
                </div>

                <!-- URL Input -->
                <div class="input-container-standalone" id="urlInputContainer" style="display: none;">
                    <div class="url-input-container">
                        <input 
                            type="text" 
                            id="urlInput" 
                            placeholder="https://example.com/terms-and-conditions"
                            class="url-input"
                        >
                        <button id="scrapeUrlBtn" class="btn btn-secondary">Fetch</button>
                    </div>
                    <div class="sample-urls">
                        <small style="color: #888; display: block; margin-bottom: 8px;">Sample URLs:</small>
                        <div class="sample-url-list">
                            <button class="sample-url-btn" data-url="https://policies.google.com/terms">Google Terms</button>
                            <button class="sample-url-btn" data-url="https://www.microsoft.com/en/servicesagreement">Microsoft Terms</button>
                            <button class="sample-url-btn" data-url="https://www.apple.com/legal/internet-services/terms/site.html">Apple Terms</button>
                            <button class="sample-url-btn" data-url="https://www.dropbox.com/terms">Dropbox Terms</button>
                        </div>
                    </div>
                    <div class="legal-disclaimer">
                        <small><strong>Legal Notice:</strong> Content scraping is performed in compliance with applicable laws and website terms of service. By using this feature, you confirm that you have the right to access and use the content from the provided URL. This tool is intended for legitimate purposes only, such as analyzing publicly accessible content. Users are responsible for ensuring their use complies with all applicable laws, regulations, and website policies.</small>
                    </div>
                </div>

                <!-- Text Input -->
                <div class="input-container-standalone" id="textInputContainer" style="display: none;">
                    <textarea 
                        id="textInput" 
                        placeholder="Paste your document text here..."
                        rows="10"
                    ></textarea>
                </div>

                <div id="uploadStatus" class="status-message"></div>
                
                <div class="action-footer">
                    <button id="nextToAgent" class="btn btn-primary">Next: Choose Agent ‚Üí</button>
                </div>
            </div>

            <!-- Card 2: Agent & Analysis Selection -->
            <div class="wizard-card" id="card-2">
                <div class="card-header">
                    <h2>ü§ñ Choose Your Agent & Analysis</h2>
                    <p class="card-subtitle">Select an agent personality and analysis type</p>
                </div>
                <div class="card-body">
                    <div class="selection-group">
                        <h3>Agent Personality</h3>
                        <div class="agent-grid">
                            <button class="agent-card" data-agent="Regular">
                                <span class="agent-icon">üìä</span>
                                <h4>Regular</h4>
                                <p>Neutral, objective analysis</p>
                            </button>
                            <button class="agent-card" data-agent="Lawyer">
                                <span class="agent-icon">‚öñÔ∏è</span>
                                <h4>Lawyer</h4>
                                <p>Legal professional perspective</p>
                            </button>
                            <button class="agent-card" data-agent="CEO">
                                <span class="agent-icon">üíº</span>
                                <h4>CEO</h4>
                                <p>Business strategy view</p>
                            </button>
                            <button class="agent-card" data-agent="Bob">
                                <span class="agent-icon">üî•</span>
                                <h4>Bob</h4>
                                <p>Chaotic professor energy</p>
                            </button>
                            <button class="agent-card" data-agent="brainrot">
                                <span class="agent-icon">üß†</span>
                                <h4>Brainrot</h4>
                                <p>YouTuber chaos mode</p>
                            </button>
                        </div>
                    </div>

                    <div class="selection-group">
                        <h3>üåç Response Language</h3>
                        <div class="language-selector">
                            <select id="languageSelect" class="language-select">
                                <option value="English">English</option>
                                <option value="Spanish">Espa√±ol (Spanish)</option>
                                <option value="French">Fran√ßais (French)</option>
                                <option value="German">Deutsch (German)</option>
                                <option value="Italian">Italiano (Italian)</option>
                                <option value="Portuguese">Portugu√™s (Portuguese)</option>
                                <option value="Chinese">‰∏≠Êñá (Chinese)</option>
                                <option value="Japanese">Êó•Êú¨Ë™û (Japanese)</option>
                                <option value="Korean">ÌïúÍµ≠Ïñ¥ (Korean)</option>
                                <option value="Arabic">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                                <option value="Russian">–†—É—Å—Å–∫–∏–π (Russian)</option>
                                <option value="Hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                <option value="Dutch">Nederlands (Dutch)</option>
                                <option value="Polish">Polski (Polish)</option>
                                <option value="Turkish">T√ºrk√ße (Turkish)</option>
                                <option value="Vietnamese">Ti·∫øng Vi·ªát (Vietnamese)</option>
                                <option value="Thai">‡πÑ‡∏ó‡∏¢ (Thai)</option>
                                <option value="Swedish">Svenska (Swedish)</option>
                                <option value="Norwegian">Norsk (Norwegian)</option>
                                <option value="Danish">Dansk (Danish)</option>
                            </select>
                            <p class="language-hint">The agent will respond in your selected language</p>
                        </div>
                    </div>

                    <div class="selection-group">
                        <h3>Analysis Type</h3>
                        <div class="analysis-grid">
                            <button class="analysis-card" data-type="malicious">
                                <span class="analysis-icon">‚ö†Ô∏è</span>
                                <h4>Malicious Clauses</h4>
                                <p>Find harmful terms</p>
                            </button>
                            <button class="analysis-card" data-type="summary">
                                <span class="analysis-icon">üìù</span>
                                <h4>Summary</h4>
                                <p>Plain language overview</p>
                            </button>
                            <button class="analysis-card" data-type="proscons">
                                <span class="analysis-icon">‚öñÔ∏è</span>
                                <h4>Pros & Cons</h4>
                                <p>Balanced analysis</p>
                            </button>
                            <button class="analysis-card" data-type="recommendation">
                                <span class="analysis-icon">‚úÖ</span>
                                <h4>Recommendation</h4>
                                <p>Should you sign?</p>
                            </button>
                            <button class="analysis-card" data-type="alternatives">
                                <span class="analysis-icon">üîÑ</span>
                                <h4>Alternatives</h4>
                                <p>Better options</p>
                            </button>
                            <button class="analysis-card" data-type="comprehensive">
                                <span class="analysis-icon">üéØ</span>
                                <h4>Comprehensive</h4>
                                <p>All perspectives</p>
                            </button>
                            <button class="analysis-card" data-type="custom">
                                <span class="analysis-icon">‚úèÔ∏è</span>
                                <h4>Custom Prompt</h4>
                                <p>Write your own</p>
                            </button>
                        </div>
                    </div>

                    <!-- Custom Prompt Section -->
                    <div class="custom-prompt-section" style="display: none;">
                        <h3>‚úèÔ∏è Custom Prompt</h3>
                        <textarea 
                            id="customPrompt" 
                            placeholder="Enter your custom analysis prompt..."
                            rows="4"
                        ></textarea>
                    </div>
                </div>
                <div class="card-footer">
                    <button id="backToUpload" class="btn btn-secondary">‚Üê Back</button>
                    <button id="analyzeBtn" class="btn btn-primary" disabled>Analyze Document</button>
                </div>
            </div>

            <!-- Card 3: Results -->
            <div class="wizard-card" id="card-3">
                <div class="card-header">
                    <h2 id="resultsTitle">üìä Analysis Results</h2>
                    <p class="card-subtitle">Your AI-powered document analysis</p>
                </div>
                <div class="card-body">
                    <div class="results-content">
                        <div id="analysisResults" class="analysis-output"></div>
                    </div>
                    
                    <!-- Q&A Section -->
                    <div class="qa-section">
                        <h3>üí¨ Ask Follow-up Questions</h3>
                        <div id="conversationContainer" class="conversation-container"></div>
                        <div class="qa-input-container">
                            <input 
                                type="text" 
                                id="questionInput" 
                                placeholder="Ask a question about this analysis..."
                                class="qa-input"
                            >
                            <button id="askQuestionBtn" class="btn btn-primary">Ask</button>
                        </div>
                        <div id="qaStatus" class="status-message"></div>
                    </div>
                    
                    <div id="saveStatus" class="status-message"></div>
                </div>
                <div class="card-footer">
                    <button id="backToAgent" class="btn btn-secondary">‚Üê Back to Agent</button>
                    <button id="newAnalysis" class="btn btn-secondary">üîÑ New Analysis</button>
                    <button id="saveBtn" class="btn btn-primary">üíæ Save to CSV</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <h3>ü§î Analyzing Your Document</h3>
            <p>Our AI agent is carefully reviewing the content...</p>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <!-- Mobile Upload Modals -->
    <!-- File Upload Modal -->
    <div id="fileUploadModal" class="upload-modal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <div class="upload-modal-title">
                    <span>üìÅ</span>
                    <span>Upload File</span>
                </div>
                <button class="upload-modal-close" data-modal="fileUploadModal">√ó</button>
            </div>
            <div class="upload-modal-body">
                <label for="fileUploadMobile" class="file-upload-area">
                    <span class="upload-icon">üìÅ</span>
                    <span class="upload-text">Click to upload</span>
                    <span class="upload-hint">Supports PDF and Word documents</span>
                    <input type="file" id="fileUploadMobile" accept=".pdf,.doc,.docx" hidden>
                </label>
            </div>
        </div>
    </div>

    <!-- URL Fetch Modal -->
    <div id="urlFetchModal" class="upload-modal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <div class="upload-modal-title">
                    <span>üåê</span>
                    <span>Fetch from URL</span>
                </div>
                <button class="upload-modal-close" data-modal="urlFetchModal">√ó</button>
            </div>
            <div class="upload-modal-body">
                <div class="url-input-container">
                    <input 
                        type="text" 
                        id="urlInputMobile" 
                        placeholder="https://example.com/terms-and-conditions"
                        class="url-input"
                    >
                    <button id="scrapeUrlBtnMobile" class="btn btn-secondary">Fetch</button>
                </div>
                <div class="sample-urls">
                    <small style="color: #888; display: block; margin-bottom: 8px;">Sample URLs:</small>
                    <div class="sample-url-list">
                        <button class="sample-url-btn" data-url="https://policies.google.com/terms">Google Terms</button>
                        <button class="sample-url-btn" data-url="https://www.microsoft.com/en/servicesagreement">Microsoft Terms</button>
                        <button class="sample-url-btn" data-url="https://www.apple.com/legal/internet-services/terms/site.html">Apple Terms</button>
                        <button class="sample-url-btn" data-url="https://www.dropbox.com/terms">Dropbox Terms</button>
                    </div>
                </div>
                <div class="legal-disclaimer">
                    <small><strong>Legal Notice:</strong> Content scraping is performed in compliance with applicable laws and website terms of service. By using this feature, you confirm that you have the right to access and use the content from the provided URL. This tool is intended for legitimate purposes only, such as analyzing publicly accessible content. Users are responsible for ensuring their use complies with all applicable laws, regulations, and website policies.</small>
                </div>
                <div id="uploadStatusMobile" class="status-message" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Paste Text Modal -->
    <div id="pasteTextModal" class="upload-modal">
        <div class="upload-modal-content">
            <div class="upload-modal-header">
                <div class="upload-modal-title">
                    <span>üìù</span>
                    <span>Paste Text</span>
                </div>
                <button class="upload-modal-close" data-modal="pasteTextModal">√ó</button>
            </div>
            <div class="upload-modal-body">
                <textarea 
                    id="textInputMobile" 
                    placeholder="Paste your document text here..."
                    rows="10"
                ></textarea>
            </div>
            <div class="upload-modal-footer">
                <button class="btn btn-secondary" data-modal="pasteTextModal">Cancel</button>
                <button id="confirmPasteText" class="btn btn-primary">Done</button>
            </div>
        </div>
    </div>

    <script src="/static/auth.js"></script>
    <script type="module" src="/static/app.js"></script>
    <script>
        // Hamburger menu toggle
        document.getElementById('hamburgerMenu').addEventListener('click', function() {
            this.classList.toggle('active');
            document.getElementById('headerLinks').classList.toggle('active');
        });
        
        // Hamburger avatar toggle (when logged in)
        document.getElementById('hamburgerAvatar').addEventListener('click', function() {
            const hamburger = document.getElementById('hamburgerMenu');
            const menu = document.getElementById('headerLinks');
            hamburger.classList.toggle('active');
            menu.classList.toggle('active');
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const hamburger = document.getElementById('hamburgerMenu');
            const hamburgerAvatar = document.getElementById('hamburgerAvatar');
            const menu = document.getElementById('headerLinks');
            if (!hamburger.contains(event.target) && 
                !hamburgerAvatar.contains(event.target) && 
                !menu.contains(event.target)) {
                hamburger.classList.remove('active');
                menu.classList.remove('active');
            }
        });
        
        // Mobile dropdown toggle
        document.addEventListener('DOMContentLoaded', function() {
            const dropdownToggle = document.querySelector('.dropdown-toggle-mobile');
            if (dropdownToggle) {
                dropdownToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const dropdown = this.closest('.mobile-dropdown');
                    dropdown.classList.toggle('active');
                });
            }
        });
    </script>
</body>
</html>
